<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soothing Audio Player</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #3f4c6b, #606c88);
            color: white;
            font-family: Arial, sans-serif;
            transition: background 1s ease;
            overflow: hidden;
            position: relative;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .volume-slider {
            position: absolute;
            left: 20px;
            bottom: 20px;
            width: 200px;
        }
        .timer-input {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            text-align: center;
            z-index: 10;
        }
        .countdown {
            font-size: 24px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<audio id="audio" preload="auto"></audio>

<div class="overlay"></div>

<div class="volume-slider">
    <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
</div>

<div class="timer-input" id="timerInput">
    <input type="number" id="timerValue" placeholder="Minutes" min="1">
    <button id="setTimerBtn">Set Timer</button>
    <div class="countdown" id="countdownDisplay"></div>
</div>

<script>
    const audioFiles = [
        "Calm (1).mp3",
        "Calm (2).mp3",
        "Calm (3).mp3",
        "Calm (4).mp3",
        "Calm (5).mp3",
        "Calm (6).mp3",
        "Calm (7).mp3",
        "Calm (8).mp3",
        "Calm (9).mp3",
        "Calm (10).mp3",
        "Calm (11).mp3",
        "Calm (12).mp3"
    ];

    let currentTrack = 0;
    const audioElement = document.getElementById('audio');
    const volumeSlider = document.getElementById('volume');
    const timerInput = document.getElementById('timerInput');
    const timerValueInput = document.getElementById('timerValue');
    const countdownDisplay = document.getElementById('countdownDisplay');
    let isMuted = false;
    let muteTimeout;
    let countdownInterval;

    function playTrack(trackIndex) {
        audioElement.src = audioFiles[trackIndex];
        audioElement.play();
    }

    audioElement.addEventListener('ended', () => {
        currentTrack = (currentTrack + 1) % audioFiles.length; // Move to the next track
        playTrack(currentTrack);
    });

    volumeSlider.addEventListener('input', () => {
        audioElement.volume = volumeSlider.value;
        if (audioElement.volume === 0) {
            isMuted = true;
        } else {
            isMuted = false;
        }
    });

    document.addEventListener('keydown', (event) => {
        if (event.key === ' ') {
            // Toggle play/pause with SPACE
            if (audioElement.paused) {
                audioElement.play();
            } else {
                audioElement.pause();
            }
            event.preventDefault(); // Prevent scrolling
        } else if (event.key === 'M' || event.key === 'm') {
            // Mute/unmute with M key
            if (isMuted) {
                audioElement.volume = volumeSlider.value;
                isMuted = false;
            } else {
                audioElement.volume = 0;
                isMuted = true;
            }
        } else if (event.key === 'T' || event.key === 't') {
            // Toggle timer input box and countdown
            timerInput.style.display = timerInput.style.display === 'block' ? 'none' : 'block';
            countdownDisplay.innerText = ''; // Clear countdown display
            if (timerInput.style.display === 'block') {
                countdownDisplay.style.display = 'block'; // Show countdown display
            } else {
                clearInterval(countdownInterval);
                countdownDisplay.style.display = 'none'; // Hide countdown display
            }
        } else if (event.key === 'Shift') {
            // Toggle layout display
            timerInput.style.display = 'block';
            setTimeout(() => {
                timerInput.style.display = 'none';
            }, 2000); // Show for 2 seconds
        }
    });

    document.getElementById('setTimerBtn').addEventListener('click', () => {
        const minutes = parseInt(timerValueInput.value);
        if (isNaN(minutes) || minutes < 1) return;
        audioElement.volume = 0; // Mute
        isMuted = true;

        // Start countdown
        let timeRemaining = minutes * 60; // Convert to seconds
        countdownDisplay.innerText = `Muted for ${minutes} minutes`;
        
        clearInterval(countdownInterval);
        countdownInterval = setInterval(() => {
            timeRemaining--;
            countdownDisplay.innerText = `Muted for ${Math.ceil(timeRemaining / 60)} minutes`;
            if (timeRemaining <= 0) {
                audioElement.volume = volumeSlider.value;
                isMuted = false;
                clearInterval(countdownInterval);
                countdownDisplay.innerText = ''; // Clear countdown display
            }
        }, 1000); // Update every second
    });

    // Start playing the first track on load
    playTrack(currentTrack);

    // Gradient animation
    function animateGradient() {
        const colors = [
            '#3f4c6b', '#606c88', '#f8cdda', '#1d2b64', 
            '#f8cdda', '#fc4a1a', '#f7b733'
        ];
        const randomColor1 = colors[Math.floor(Math.random() * colors.length)];
        const randomColor2 = colors[Math.floor(Math.random() * colors.length)];
        document.body.style.background = `linear-gradient(135deg, ${randomColor1}, ${randomColor2})`;
    }
    
    setInterval(animateGradient, 5000); // Change gradient every 5 seconds
</script>
</body>
</html>
